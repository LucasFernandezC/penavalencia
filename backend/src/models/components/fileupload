const fs = require("fs");
const axios = require("axios");
const formData = require("form-data");

const uploadAxios = async () => {

    try {
        console.log("ping !");

        const myFile = fs.readFileSync(
            `YOUR_FILE_LOCATION_ON_YOUR_COMPUTER`, { encoding: "base64" }
        );

        const myForm = new formData();
        myForm.append("image", myFile);

        await axios
            .post(
                `https://api.imgbb.com/1/upload?key=YOUR_KEY_YOU_GOT_ON_THE_API_PAGE`,
                myForm,
                {
                    headers: {
                        "Content-Type": "multipart/form-data",
                    },
                }
            )
            .then((response) => {
                console.log("API response ↓");
                console.log(response);
            })
            .catch((err) => {
                console.log("API error ↓");
                console.log(err);

                if (err.response.data.error) {
                    console.log(err.response.data.error);
                    //When trouble shooting, simple informations about the error can be found in err.response.data.error so it's good to display it
                }

            });
    } catch (error) {
        console.log(error);
    }
}